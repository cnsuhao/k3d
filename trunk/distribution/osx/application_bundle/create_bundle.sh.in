#!/bin/sh

BUNDLE_DIR="@k3d_BINARY_DIR@/application_bundle/K-3D.app/Contents"

mkdir -p "${BUNDLE_DIR}/MacOS"
mkdir -p "${BUNDLE_DIR}/Resources"

cd "${BUNDLE_DIR}"

# Copy binary executables ...
cp "@k3d_BINARY_DIR@/bin/k3d" MacOS
cp "@k3d_BINARY_DIR@/bin/k3d-bug-buddy" MacOS
cp "@k3d_BINARY_DIR@/bin/k3d-make-module-proxy" MacOS
cp "@k3d_BINARY_DIR@/bin/k3d-renderframe" MacOS
cp "@k3d_BINARY_DIR@/bin/k3d-renderjob" MacOS
cp "@k3d_BINARY_DIR@/bin/k3d-sl2xml" MacOS
cp "@k3d_BINARY_DIR@/bin/k3d-uuidgen" MacOS

# Copy shared files ...
cp -r "@k3d_SOURCE_DIR@/share" 

# Setup the application icon ...
cp "@k3d_SOURCE_DIR@/share/icons/k3d.icns" Resources/k3d.icns

# Setup the metadata file ...
cp "@k3d_SOURCE_DIR@/distribution/osx/application_bundle/Info.plist" .

